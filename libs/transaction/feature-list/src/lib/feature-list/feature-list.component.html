<ngbank-page>
  <h1>Transactions</h1>

  <ngbank-select-account
    [accounts]="accounts$ | async"
    (selectionChange)="selectAccount($event)"
  ></ngbank-select-account>

  <ngbank-new-transaction
    [selectedAccountId]="selectedAccountId$ | async"
    (createTransaction)="createTransaction($event)"
  ></ngbank-new-transaction>

  <mat-list
    *ngIf="
      transactionsGroupedByBookingDate$
        | async as transactionsGroupedByBookingDate;
      else noTransactions
    "
  >
    <ng-container *ngFor="let group of transactionsGroupedByBookingDate">
      <div mat-subheader>
        {{ group.bookingDate | date }}
      </div>

      <mat-list-item *ngFor="let transaction of group.transactions">
        <span matListItemTitle>
          {{
            transaction.counterPartyName ? transaction.counterPartyName : '-'
          }}
        </span>
        <span matListItemLine>
          {{ transaction.e2eReference ? transaction.e2eReference : '-' }}
        </span>
        <span
          matListItemMeta
          [ngClass]="{ 'text-success': transaction.amount > 0 }"
          >{{ transaction.amount | currency : transaction.currencyCode }}</span
        >
      </mat-list-item>
    </ng-container>
  </mat-list>

  <ng-template #noTransactions>
    <p>You don't have any transactions yet</p></ng-template
  >
</ngbank-page>
